## –û–ø–∏—Å–∞–Ω–∏–µ

–ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω route GET `/lessons`.
–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å [–¢–ó](technical_specification.md) / [Google Docs](https://docs.google.com/document/d/15f83XqAHbN_1AOf_8XR7sZ4pxhe5WoHNIaa31AipqpU).

–î–æ–±–∞–≤–∏–ª –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è pkey –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö `lesson_teachers` –∏ `lesson_students`.

–ù–∞ –º–æ–π –≤–∑–≥–ª—è–¥ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω–µ—á–Ω–æ–π.\
–Ø –∑–∞–º–µ—Ç–∏–ª —á—Ç–æ –≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–º –¥–∞–º–ø–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `plpgsql`.\
–≠—Ç–æ –∂–∂–∂ –Ω–µ —Å –ø—Ä–æ—Å—Ç–∞!) üêùüêªüêù

–î—É–º–∞—é —á—Ç–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ç–æ–≥–æ —á—Ç–æ –≤ –±–∞–∑–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–µ –¥–µ—Å—è—Ç–∫–∏, –∞ –º–∏–ª–ª–∏–æ–Ω—ã –∑–∞–Ω—è—Ç–∏–π, –Ω–∞–¥ sql –∑–∞–ø—Ä–æ—Å–æ–º –Ω—É–∂–Ω–æ –µ—â–µ –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å.

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —Ä–µ—à–∏–ª –æ—Ç–æ–π—Ç–∏ –Ω–µ–º–Ω–æ–≥–æ –æ—Ç –Ω–∞–µ–∑–∂–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏ –∏ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ `TS`,\
—Ç.–∫ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `JS` + `jsDoc` + `TS`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç–æ—Ç—É –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞ –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

–¢–∞–∫ –∂–µ —Ä–µ—à–∏–ª –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–æ–π –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–π [knex.js](https://knexjs.org/guide/migrations),\
—Ç.–∫ –æ–±—ã—á–Ω–æ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å–∞–º–æ–ø–∏—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –º–∏–≥—Ä–∞—Ü–∏–π, –∏—Å—Ö–æ–¥—è –∏–∑ –ø–æ–¥—Ä–µ–±–Ω–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞.

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
docker-compose up db api
```

–ü—Ä–∏ —ç—Ç–æ–º —Å–æ–∑–¥–∞–¥—É—Ç—Å—è 2 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

-   `pg` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è postgreSQL, –≤ –ë–î —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞–¥—É—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã –∏–∑ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–∞–º–ø–∞
-   `api` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Å–µ—Ä–≤–µ—Ä–æ–º –Ω–∞ express, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å `5000` (`API_PORT`) –ø–æ—Ä—Ç

\*–í —Ç–µ—Ä–º–∏–Ω–∞–ª –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ postgresql

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –º–æ–∂–Ω–æ –∏—Å—Ç–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω –¥–ª—è [VS Code](https://code.visualstudio.com/) [PostgreSQL](https://marketplace.visualstudio.com/items?itemName=cweijan.vscode-postgresql-client2)\
–î–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è HOST: `localhost`, PORT: `5430`, DB: `my_class`, USER: `postgres`, PASSWORD: `postgres`

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

```
http://localhost:5000/lessons
```

```
http://localhost:5000/lessons?date=2019-09-01&teacherIds=1,2,3&studentsCount=1,5&page=1
```

```
http://localhost:5000/lessons?teacherIds=1,2,3&studentsCount=1,5&page=1
```

```
http://localhost:5000/lessons?date=2019-09-02,2019-09-01&teacherIds=1,2,3&studentsCount=1,5&lessonsPerPage=1&page=2
```

\*–¢–∞–∫–∂–µ –ø—Ä–∏–ª–æ–∂–∏–ª —Ñ–∞–π–ª –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–ª—è postman

## –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –æ–±—Ä–∞–∑–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö

```bash
docker compose down --rmi local -v
```

## –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å:

#### –î–ª—è —Ç—Ä–∞–Ω—Å–ø–∏–ª—è—Ü–∏–∏ ts –≤ js:

```bash
npm run ts:watch
```

#### –î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏ dev –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
docker-compose up api-dev
```

#### –î–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
npm run watch
```

\*–ó–∞–ø—É—Å–∫–∞–µ—Ç nodemon, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ `dist` –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å `GET` –∑–∞–ø—Ä–æ—Å  `http://localhost:5001/restart` –≤ `api-dev` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è curl
